"If you want total security, go to prison. There you're fed, clothed, given medical care and so on. The only
thing lacking ... is freedom."

-- Dwight D. Eisenhower 


- Low-hanging fruit is easier to pick
- Eliminating the most obvious riskes can make a big difference to security 

Attack Surface
--------------
"The attack surface of a software environment is the sum of the different points (the "attack vectors") where
an unauthorized user can try to enter data to or extract data from an environment."
(Wiki)

* Taking control of your servers
* Assessing vulnerability 
* Implementing a security policy with PAM
* Taming the root account
* Controlling access to services
* Looking for suspicious activity 

Looking at log files
Recovering from a lost root password
- Rescure boot
- Forced single-user boot
Setting a boot loader password 
Configuring key-based ssh login 


$ cat /var/log/secure 

$ grep pam_succeed_if secure | less


Rescue Booting
--------------
Require physical machine

Boot from Installation Media in Rescue mode
==>
Linux running with In-memory filesystem 

Forced Single-User Boot
-----------------------
Asking GRUB to pass additional parameter we can tell not to run init or systemd. 

Press 'e' in bootloader menu. 
Go to line /vmlinuz
1. Change ro => rw
2. Add init=/sysroot/bin/sh 

Ctrl + x

# chroot /sysroot
# passwd root
# touch /.autorelabel

Restart the machine.

Setting a GRUB Password
-----------------------
Grub2 configuration file
# cd /etc/grub.d/
# ls
01_users

# vi 01_users

Add the following:
cat << EOF
set superuser="admin"
password admin admins-pass
EOF

# vi 10_linux

/CLASS
CLASS="--class ...--unrestricted"

Remove --unrestricted : Take out to force grub to request username and password.

# cd /boot/grub2
# cp grub.cfg grub.cfg.backup
# grub2-mkconfig -o /boot/grub2/grub.cfg
# reboot


Assessing the Vulnerability of Linux Server
------------------------------------------

